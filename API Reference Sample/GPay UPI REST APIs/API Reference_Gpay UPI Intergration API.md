# GPay UPI Integration API Reference
------

Unified Payment Interface (UPI) enables a user to transfer money directly from bank accounts using a smartphone. UPI is used through GPay through an individual user account. The GPay UPI Integration APIs are used to manage the user and payment objects.


The following APIs are described in this API reference:  
- [User API](#1-user-api)
    - [List users](#list-users)
    - [Create a new user](#create-a-new-user)
    - [Retrieve user by ID](#retrieve-user-by-id)
    - [Update user details](#update-user-details)
    - [Delete user by ID](#delete-user-by-id)
- [Payment API](#2-payment-api)
    - [Initiate a payment](#initiate-a-payment)

The [Response Error Codes](#response-error-codes) section describes the error returned by the endpoints when an execution fails.


## 1. User API
---

User API enables you to manage user information. The methods are used to create, update, and delete user objects and retrieve user data in bulk or filtered by user ID. The endpoints of the User API are described in this section.


### List users 
---

Retrieves user details. Offset the result and control the number of results displayed using parameters.

Method: `Get`  
Endpoint: `/users`

#### Request
---

The request parameters of the endpoint are described below:

| Parameters | Data Type | Required | Description | 
|----------------|----------------|----------------|----------------|
| **limit**  | Integer | No | Enter the number of users to be retrieved. By default, the endpoint returns details of 20 users. |
| **offset** | Integer | No | Enter the number of pages to skip before retrieving the user details. The records before this page number are not retrieved. By default, the endpoint retrieves records from 1st page. |

#### Response
---
Sample response body after a successful execution.

```json
[
  {
    "userId": "user_12345",
    "name": "Leona Moretti",
    "mobile": "+919876543210",
    "email": "leona@example.com"
  }
  {
    "userId": "user_12346",
    "name": "Rose Moretti",
    "mobile": "+919876543211",
    "email": "rose@example.com"
  }
]
```

### Create a new user
---

Creates a new user object using the details provided in the request body. A unique ID is generated by the system for the user.

Method: `POST`  
Endpoint: `/users`

#### Request
---

Provide the following user details through the request body to create a new user object.

| Fields | Data Type | Required | Description | 
|----------------|----------------|----------------|----------------|
| **name** | String | Yes | First and last names of user.|
| **mobile** | String | Yes | 10 digit unique phone with area code.|
| **email** | String (email format)| No | Email address of user.|

Sample request body.

```Json
{
  "name": "Leona Moretti",
  "mobile": "+919876543210",
  "email": "leona@example.com"
}
```
#### Response
---

Sample response body after a successful execution.

```json
[
  {
    "userId": "user_12345",
    "name": "Leona Moretti",
    "mobile": "+919876543210",
    "email": "leona@example.com"
  }
]
```


### Retrieve user by ID
---

Retrieves details of a specific user. The endpoint returns details of the user associated with the ID provided in the parameter.

Method: `GET`  
Endpoint: `/users/{userId}`

#### Request
---

The request parameter of the endpoint is described below:

| Parameter | Data Type | Required | Description | 
|----------------|----------------|----------------|----------------|
| **userId**  | String | Yes | Enter the ID associated with the user.|

#### Response
---

Sample response body after a successful execution.

```json
[
  {
    "userId": "user_12345",
    "name": "Leona Moretti",
    "mobile": "+919876543210",
    "email": "leona@example.com"
  }
]
```


### Update user details
---

Updates the details of the user associated with the ID provided in the parameter. Provide details to be updated in the request body.

Method: `PUT`  
Endpoint: `/users/{userId}`

#### Request
---
The request parameter of the endpoint is described below:

| Parameter | Data Type | Required | Description | 
|----------------|----------------|----------------|----------------|
| **userId**  | String | Yes | Enter the ID associated with the user.|


Provide updated user details through the request body. The following fields are eligible for updates:

| Fields | Data Type | Required | Description | 
|----------------|----------------|----------------|----------------|
| **name** | String | Yes | First and last names of user.|
| **mobile** | String | Yes | 10 digit unique phone with area code.|
| **email** | String (email format)| No | Email address of user.|

Sample request body.

```Json
{
  "name": "Carla Moretti",
  "mobile": "+919876543210",
  "email": "Carla@example.com"
}
```

#### Response
---

Sample response body after a successful execution.

```Json
{
  "userId": "user_12345",
  "name": "Carla Moretti",
  "mobile": "+919876543210",
  "email": "Carla@example.com"
}
```


### Delete user by ID
----

Deletes the user object associated with the ID provided in the parameter.

Method: `DELETE`  
Endpoint: `/users/{userId}`

#### Request
---

The request parameter of the endpoint is described below:

| Parameter | Data Type | Required | Description | 
|----------------|----------------|----------------|----------------|
|**userId**  | String | Yes | Enter the ID associated with the user object to be deleted.|

#### Response
---

Sample response body after an unsuccessful execution.

```Json
{
  "code": 400,
  "message": "Invalid request parameters"
}
```


## 2. Payment API
------

Payment APIs enable you to initiate and manage payments made through the UPI. The payments are initiated on the UPI apps by a user to be made to a Virtual Payment Address.

This method is used to initiate a payment from a user to a Virtual Payment Address(VPA).

### Initiate a payment  
------

Initiates a UPI payment of a given amount from a user to the VPA of another user as defined in the request body. Optionally, a note containing the purpose of the transaction is attached to the payment. The endpoint attaches a system-generated unique ID to the transaction.

Method: `POST`  
Endpoint: `/payments`

#### Request
---

Provide the following details through the request body to initiate a payment.

| Fields | Data Type | Required | Description | 
|----------------|----------------|----------------|----------------|
| **fromUserId**| String | Yes | ID of the user initiating the payment.|
| **toVPA** | String | Yes | Virtual Payment Address of the payment reciever.|
| **amount** | Number (float format) | Yes | Amount to be paid to the Virtual Payment Address defined in _toVPA_.|
| **transactionId**| String | Yes | System generated unique identifier for the transaction.|
|**note**| String | No | User added note about purpose of transaction.|

Sample request body.

```Json
{
  "fromUserId": "user_12345",
  "toVPA": "dario@upi",
  "amount": 1500.5,
  "transactionId": "txn_987654321",
  "note": "Dinner payment"
}
```

#### Response
---

Sample response body after a successful execution.

```Json
{
  "transactionId": "txn_987654321",
  "status": "SUCCESS",
  "timestamp": "2025-05-21T10:15:30Z"
}
```

## Response Error Codes
The following table describes the response codes returned after execution of the endpoint:

| Code series| Description | 
|----------------|----------------|
| 200s  | The endpoint returns code in a series of 200 upon successful execution. For example, when an object is successfully created, updated, or deleted. |
| 400s |The endpoint returns code in a series of 400 upon execution failure. For example, the execution fails due to authorization issues or incorrect values in the parameters.|
